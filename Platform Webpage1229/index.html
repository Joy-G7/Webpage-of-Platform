<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
    <title>空间智能算网模拟验证平台</title>
    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.15.3/dist/bootstrap-table.min.css">

    <link rel="stylesheet" href="css/css2.css">
    <!-- 引入jquery -->
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>
    <!-- 引入 echarts -->
    <script src="js\echarts.min.js"></script>
    <!-- 可选的 Bootstrap 主题文件（一般不用引入） -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://unpkg.com/bootstrap-table@1.15.3/dist/bootstrap-table.min.js"></script>
    <!-- Latest compiled and minified Locales -->
    <script src="https://unpkg.com/bootstrap-table@1.15.3/dist/locale/bootstrap-table-zh-CN.min.js"></script>

    <script>
        var errorcount = 0;
        var errorcountcon = 0;

        $('tr td').on('hover', function() {
            $(this).attr("title", $(this).text());
            $(this).css("background-color", 'white');
        });
    </script>
</head>

<body background="images/background.jpg" style="background-repeat: no-repeat;background-size: 100% 100%; background-attachment: fixed; text-align: center">
    <center>
        <div style="margin:1% auto; width: 1900px;height: 1000px; position:relative">
            <div style="position: absolute;; left:1.5%;top:0%;z-index: 2000;"><img src="images//Qian Lab Logo v1 CHS RW.png" width='300px' height='75px'></div>
            <h1>空间高动态智能算网模拟验证平台</h1>
            <h2 style="position: absolute;right:5%;top:0%">频谱与网络团队</h2>
            <!-- 简介-->
            <div id="sectionintro" style="width: 97%;height: 6%; left:1.5%;top:11%">
                <h2 style="color: #113864;"> 空间算网通过空间网络化计算协议体系，能够充分利用卫星资源，构建高动态临机任务计算网络，实现“发现即接入，接入即计算”。</h2>
            </div>
            <!-- STK图-->
            <div class='section' id='stkdiv' style="top: 17%;left: 1.5%;width: 47%;height: 45%;">
                <!--      <h3 style="color: azure;padding: 0 1em;">空间智能算网包含数百颗智能小卫星，能够实现用户随需接入空间云。该构型具有20个轨道面，每个轨道面25颗卫星，轨道高度1000km，倾角53度; 地面用户至少能和5颗智能小卫星相连
                </h3> -->
                <div style="padding: 8px;">
                    <video style='float:left;width: 870px; ' autoplay loop controls muted> 
                        <source src="images\STKchangjingtu\xingzuogouxing.mp4" type="video/mp4"> 
                    </video>
                </div>

            </div>
            <!-- 步骤图-->
            <div class='section ' id='gifdiv' style="top: 17%;left: 1.5%;width: 47%;height: 45%; z-index: 2000;display: none;">
                <h2>动态网络化计算场景</h2>
                <div style="position:absolute;width: 100%;padding:  0 1em;text-align: center;">
                    <img id='stepgif ' src='images\fenbuzhou\quanchangjing.gif' style="width: 700px;margin: auto;">

                </div>
            </div>
            <!-- 识别任务执行-->
            <div class='section ' style="top: 17%;left: 48.5%; width: 50%; height: 45%;">
                <h2 align="center">临机任务执行</h2>
                <button id="taskpicstart" class='btn btn-primary ' style="position: absolute;right:2%;top:2%; display: inline; z-index: 2000;">开始任务
                </button>
                <div style="width: 98%;z-index: 3000;position:absolute;top:7%;margin: 1%;">
                    <ul id='myTab' class="nav nav-tabs" role="tablist" style="z-index: 2001; width: 100%;">
                        <li class="active" data-toggle="tab"><a href="#sectionpicresultleft" style="font-weight: bold;"><i class="icon-user icon-white"></i>遥感图像</a></li>
                        <li data-toggle="tab" id='matrixtab'><a href="#matrixsection" style="font-weight: bold;">数值结果</a></li>
                    </ul>
                </div>
                <div id="myTabContent" class="tab-content" style='margin: 0.5em;z-index: 2000; '>
                    <div id="background" class="background" style="display: none; "></div>
                    <div id="progressBar" class="progressBar" style="display: none; width: 100%;">
                        <img src="images/progressbar.gif" style="text-align: center; padding-left: 60px; width: 20px; height: 20px;">
                        <p>计算中，请稍等...
                            <p>
                    </div>
                    <!-- 识别图像-->
                    <div id="sectionpicresultleft" class="tab-pane fade in active" style=" ">
                        <div id="sectionpicresultleftoriginal" style="padding: 3em 0;">
                            <img id="picbg" src="images\huafen\yuantu.png" alt="图像" width="580px" style="padding: 1em;">
                            <img id="picbg" src="images/IMG_1623.JPG" alt="图像" width="295px" style="padding: 0.5em;">
                        </div>
                        <div id="sectionpicresultleftoriginal2" style="z-index: 2001;display: none;padding: 3em 0;">
                            <div style="">
                                <img id="picbg2" src="images\huafen\jieguozongtu.png" alt="图像" width="580px" style="padding: 1em;">
                                <img id="picbg2" src="images/IMG_1621.JPG" alt="图像" width="295px" style="padding: 0.5em;">
                            </div>
                        </div>
                        <!-- 流程分图 -->
                        <div id="sectionpicresultleftseperate" class="" style="display: none;height: 100%;width: 100%;">
                            <div style=" width:inherit;">
                                <h3 id="hashrate" class='btn h3 ' style="display: inline;color:azure;font-size: 22px;margin: 1em;"></h3>

                            </div>
                            <!-- 切分图· -->
                            <div style=" width: 60%;height: 90%;position:absolute;top:25%;left:2%;">
                                <img src="images/yuantuhuafen/1.png" alt="图像" width="184px" style="padding: 2px;">
                                <img src="images/yuantuhuafen/2.png" alt="图像" width="184px" style="padding: 2px;">
                                <img src="images/yuantuhuafen/3.png" alt="图像" width="184px" style="padding: 2px;">
                                <img src="images/yuantuhuafen/4.png" alt="图像" width="184px" style="padding: 2px;">
                                <img src="images/yuantuhuafen/5.png" alt="图像" width="184px" style="padding: 2px;">
                                <img src="images/yuantuhuafen/6.png" alt="图像" width="184px" style="padding: 2px;"></div>
                            <div style=" width: 40%;height: 90%;position:absolute;top:25%;right:1%;">
                                <!-- 切分图· -->
                                <img src="images\Sar\1.png" alt="图像" width="142px" style="padding: 2px;">
                                <img src="images\Sar\2.png" alt="图像" width="142px" style="padding: 2px;">
                                <img src="images\Sar\3.png" alt="图像" width="142px" style="padding: 2px;">
                                <img src="images\Sar\4.png" alt="图像" width="142px" style="padding: 2px;">

                            </div>
                        </div>
                    </div>

                    <!-- 识别矩阵结果-->
                    <div id='matrixsection' class="tab-pane fade" style="position: absolute;top: 19%; width: 98%; height: 80%;">

                        <div id='matrixtable' class="table" style="position:absolute;top:10%;height: 90%;width:100%; z-index:2000;">
                            <table id='matrixtabledata' data-virtual-scroll="true" class=" table table-hover  text-nowrap  table-no-bordered " style='margin: 10px;max-width: 98%;max-height: 100%;min-width: 97%;' data-toggle="table">
                                <thead class='info'>
                                    <tr>
                                        <th>ip</th>
                                        <th>图名</th>
                                        <th>置信度</th>
                                        <th>x,y坐标</th>
                                        <th>角度</th>
                                        <th>大小</th>
                                    </tr>
                                </thead>
                                <tbody>

                                </tbody>
                            </table>
                        </div>

                    </div>
                </div>
            </div>
            <!-- 协议图-->
            <div class='section' style="top: 62%;  left: 1.5%;width: 30%;height: 39%; padding: 0.5em;">
                <div style="left:0%;top:0%;" style="width: 59%;height:95%;padding: 1em;">
                    <img id='xygif' src='images\xieyijiegou-jingzhi.jpg' style="width: 95%;left:2%;top:0%;">
                    <p>协议层数据流交互</p>
                </div>
            </div>
            <!-- 拓扑图-->
            <div class='section ' style="top: 62%; left: 31.5%;width: 17%;height: 39%;">
                <div id="charttopology" style="top:1%;left: 0%;width: 100%;height: 99%;z-index: 2000;"></div>
            </div>

            <!-- 任务部署和设备信息-->
            <div class='section ' style="top: 62%;left: 48.5%;width: 50%;height: 39%;padding: 0.5%;">
                <div class="btn-group" style="display: inline;margin: 0.5em;">
                    <div class="btn-group">
                        <button id="taskcontainerstart" type="button" class="btn btn-default" style=" font-size: 18px;">部署任务</button>
                    </div>
                    <div class="btn-group">
                        <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" style=" font-size: 18px;">卫星加入</button>
                        <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" style=" font-size: 18px;">
                                <span class="caret"></span>
                                <span class="sr-only">切换下拉菜单</span>
                            </button>
                        <ul class="dropdown-menu" role="menu">

                            <li><a id='d2add'>卫星2</a></li>
                            <li><a id='d3add'>卫星3</a></li>
                            <li><a id='d4add'>卫星4</a></li>
                            <li><a id='d5add'>卫星5</a></li>

                        </ul>
                    </div>
                    <div class="btn-group">

                        <button id="btnGroupDrop1" type="button" class="btn btn-primary dropdown-toggle" style=" font-size: 18px;" data-toggle="dropdown">卫星超载</button>
                        <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" style=" font-size: 18px;">
                            <span class="caret"></span>
                            <span class="sr-only">切换下拉菜单</span>
                        </button>
                        <ul class="dropdown-menu" role="menu">
                            <li><a id='d2cpu'>卫星2</a></li>
                            <li><a id='d3cpu'>卫星3</a></li>
                            <li><a id='d4cpu'>卫星4</a></li>
                            <li><a id='d5cpu'>卫星5</a></li>
                        </ul>
                    </div>
                    <div class="btn-group">
                        <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" style=" font-size: 18px;">停止超载</button>
                        <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" style=" font-size: 18px;">
                                <span class="caret"></span>
                                <span class="sr-only">切换下拉菜单</span>
                            </button>
                        <ul class="dropdown-menu" role="menu">
                            <li><a id='d2cpustop'>卫星2</a></li>
                            <li><a id='d3cpustop'>卫星3</a></li>
                            <li><a id='d4cpustop'>卫星4</a></li>
                            <li><a id='d5cpustop'>卫星5</a></li>
                        </ul>
                    </div>
                    <div class="btn-group">
                        <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" style=" font-size: 18px;">卫星退出</button>
                        <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" style=" font-size: 18px;">
                                <span class="caret"></span>
                                <span class="sr-only">切换下拉菜单</span>
                            </button>
                        <ul class="dropdown-menu" role="menu">
                            <li><a id='d2shut'>卫星2</a></li>
                            <li><a id='d3shut'>卫星3</a></li>
                            <li><a id='d4shut'>卫星4</a></li>
                            <li><a id='d5shut'>卫星5</a></li>
                        </ul>
                    </div>

                </div>
                <h3 style="display: inline;  color: azure;padding: 0.1em;">任务总数：
                    <code id="containernumber" style="display: inline; color: #113864;">
                            </code>
                </h3>


                <!-- 设备信息-->
                <div style="position: absolute;left: 50%;width: 50%;height: 86%;padding: 0.5em;">
                    <!--            <div id="charttopology" style="top:5%;left: 50%;width: 50%;height: 100%;"></div> -->
                    <div id="barchartcpu" style='position: absolute; top: 0%;left: 2%;width:97%;height: 100%; '></div>
                </div>
                <!-- 容器部署-->
                <div style="position: absolute;left:0%;width:50%;height: 86%;">
                    <div id="barchartnum" style="position: absolute;top: 0%;width: 97%;height: 100%;"></div>
                </div>

                <div id="background2" class="background" style="display: none; width: 100%;"></div>
                <div id="progressBar2" class="progressBar" style="display: none; width: 50%;height: 50%;">
                    <img src="images/progressbar.gif" style="text-align: center; padding-left: 60px; width: 20px; height: 20px;">
                    <p>部署中，请稍等...
                        <p>
                </div>
            </div>
        </div>
    </center>
    <script type="text/javascript">
        $(function() {
            $(document).on('click', '#myTab a', function(e) {
                e.preventDefault(); //阻止a链接的跳转行为
                $(this).tab('show'); //显示当前选中的链接及关联的content
            })
        });
        $(document).on('click', '#matrixtab', function(e) {
            e.preventDefault(); //阻止a链接的跳转行为
            $(this).tab('show'); //显示当前选中的链接及关联的content
        });

        function refresh(number) { //更新系统信息      
            var ChartCPU = echarts.init(document.getElementById('barchartcpu'));
            let chartstatus = setInterval(function() {
                if (errorcount >= number) {
                    console.log('stop refresh info');
                    clearInterval(chartstatus);
                } else {}
                //获得gpu cpu数据
                getchart();
                /* ChartCPU.clear(); */
                ChartCPU.setOption(optioncpu, true);
                console.log('htmlerrorcount:' + errorcount);

            }, 1500); //局部刷新1000ms

        }
        refresh(1);
        //=========================//===============================//

        function refreshcontainer(number) { //更新容器信息

            var myChartNum = echarts.init(document.getElementById("barchartnum"));
            myChartNum.clear();
            let refreshcontainer = setInterval(function() {
                if (errorcountcon >= number) {
                    clearInterval(refreshcontainer);
                    console.log("stop refresh container");
                }
                getchartnum();
                myChartNum.setOption(optionnum, true); //生成容器数量柱状图
                $("#containernumber").html(getnumsum()); //获得容器总数
                console.log('errorcontainer ' + errorcountcon);
            }, 1000); //局部刷新1000ms
        };
        refreshcontainer(1); //setoption num 循环

        function refreshTopology() { //更新拓扑图
            var ChartTopology = echarts.init(document.getElementById("charttopology"));
            ChartTopology.clear();
            let refreshTopology = setInterval(function() {
                updatetopology();
                ChartTopology.setOption(optiontopology, true);
            }, 1000); //局部刷新1000ms
        };
        refreshTopology();
    </script>
    <script src='js\mnyzpt.js'></script>
</body>

</html>